(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,n){e.exports=n(302)},128:function(e,t,n){},136:function(e,t,n){},195:function(e,t,n){},300:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(84),s=n.n(i),c=(n(128),n(2)),u=n.n(c),l=n(10),h=n(8),p=n(4),d=n(6),f=n(12),m=n(11),v=n(13),b=n(35),g=(n(136),n(138),n(5)),N=n.n(g),y=new function e(){Object(p.a)(this,e),this.googleAuthProvider=void 0;N.a.initializeApp({apiKey:"AIzaSyCpFJ42-kwnLLQOLAiS3k7Z7JGMa6jQK4Y",authDomain:"arnotes-3dcf8.firebaseapp.com",projectId:"arnotes-3dcf8"}),N.a.firestore().settings({timestampsInSnapshots:!0}),this.googleAuthProvider=new N.a.auth.GoogleAuthProvider},j=new(function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"logout",value:function(){return N.a.auth().signOut()}},{key:"loginGoogle",value:function(){return N.a.auth().signInWithRedirect(y.googleAuthProvider)}},{key:"getAuthState",value:function(){return new Promise(function(e){var t=N.a.auth().onAuthStateChanged(function(n){e(n),t()})})}},{key:"getUser",value:function(){return N.a.auth().currentUser}},{key:"getRedirectResult",value:function(){return N.a.auth().getRedirectResult()}}]),e}()),O=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).state={loginGoogleLoading:!1},n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"loginGoogle",value:function(){var e=Object(h.a)(u.a.mark(function e(t){var n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.googleLoading=!0,e.next=3,j.loginGoogle().catch(function(e){return n.googleLoading=!1});case 3:this.googleLoading=!1;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"mt-5"},o.a.createElement("div",{className:"text-center"},o.a.createElement("h4",null,"Sign in to ArNotes")),o.a.createElement("div",{className:"auth-login card ml-5 mr-5 mt-4 mx-auto p-5"},o.a.createElement("button",{disabled:this.googleLoading,onClick:function(t){return e.loginGoogle(t)},className:"btn btn-signin btn-block btn-danger"},this.googleLoading?"loading...":"Login with Google")))}},{key:"googleLoading",get:function(){return this.state.loginGoogleLoading},set:function(e){this.setState(Object(l.a)({},this.state,{loginGoogleLoading:e}))}}]),t}(r.Component),k=n(34);function E(e){return{type:a.SET_USER,data:e}}function w(e){return{type:a.SET_ACTIVE_NOTE,data:e}}!function(e){e.SET_USER="SET_USER",e.SET_ACTIVE_NOTE="SET_ACTIVE_NOTE"}(a||(a={}));var S=Object(k.b)({user:function(e,t){switch(t.type){case a.SET_USER:return t.data;default:return e||null}},activeNoteID:function(e,t){switch(t.type){case a.SET_ACTIVE_NOTE:return t.data;default:return e||null}}}),C=Object(k.c)(S,{}),T=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"logout",value:function(){var e=Object(h.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.logout();case 2:C.dispatch(E(null));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("nav",{className:"navbar navbar-dark bg-primary"},o.a.createElement("h3",{className:"text-white",onClick:this.logout},"foo"))}}]),t}(r.Component),x=n(22),I=n(304),A=n(305),D=new(function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"getCollection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=N.a.firestore().collection(e);return t&&(n=t(n)),n.get().then(function(e){var t=[];return e.forEach(function(e){var n=e.data();n.ID=e.id,t.push(n)}),t.sort(function(e,t){return e.ID.localeCompare(t.ID)}),t})}},{key:"addToCollection",value:function(e,t){return N.a.firestore().collection(e).add(t).then(function(e){return t.ID=e.id,t})}},{key:"updateItem",value:function(e,t){return N.a.firestore().collection(e).doc(t.ID).update(t)}},{key:"removeItem",value:function(e,t){return N.a.firestore().collection(e).doc(t.ID).delete()}}]),e}()),L=(n(195),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).sbjSearch=new I.a,n.subs=[],n.renderedNotesRef=o.a.createRef(),n.onSearchChange=n.onSearchChange.bind(Object(x.a)(Object(x.a)(n))),n.filterResults=n.filterResults.bind(Object(x.a)(Object(x.a)(n))),n.renderNote=n.renderNote.bind(Object(x.a)(Object(x.a)(n))),n.state={filterText:""},n.sbjSearch.pipe(Object(A.a)(500)).subscribe(function(e){return n.changeFilterText(e)}),n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"changeFilterText",value:function(e){this.setState(Object(l.a)({},this.state,{filterText:e}))}},{key:"filterResults",value:function(){var e=this.state.filterText.toLowerCase();return(this.props.notes||[]).filter(function(t){var n=t.Title.toLocaleLowerCase().includes(e),a=t.Body.toLocaleLowerCase().includes(e);return!e||n||a})}},{key:"onSearchChange",value:function(e){this.sbjSearch.next(e.target.value)}},{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.subs&&this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"onClickNote",value:function(e){C.dispatch(w(e.ID)),this.props.onSelectNote&&this.props.onSelectNote(e)}},{key:"addNote",value:function(){var e=Object(h.a)(u.a.mark(function e(){var t,n,a,r,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,this.setState(Object(l.a)({},this.state,{addNoteLoading:!0})),n={Body:"",Title:"New Note - "+t.toLocaleString(),UID:this.props.user.uid},e.next=5,D.addToCollection("notes",n);case 5:a=e.sent,this.props.onAddNote&&this.props.onAddNote(a),this.props.notes.push(a),C.dispatch(w(a.ID)),r=this.renderedNotesRef.current,(o=r.querySelector(".active"))&&o.scrollIntoView(),this.setState(Object(l.a)({},this.state,{addNoteLoading:!1}));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderNote",value:function(e){var t=this;return o.a.createElement("button",{key:e.ID,type:"button",onClick:function(n){return t.onClickNote(e)},className:"list-group-item-action list-group-item "+(this.props.activeNoteID==e.ID&&"active list-group-item-info")},e.Title||"\xa0")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"card note-list-container"},o.a.createElement("ul",{className:"list-group"},o.a.createElement("li",{className:"list-group-item"},o.a.createElement("div",{className:"input-group flex-nowrap"},o.a.createElement("input",{onChange:this.onSearchChange,type:"search",className:"form-control",placeholder:"Search notes..."}))),o.a.createElement("div",{className:"rendered-notes",ref:this.renderedNotesRef},this.filterResults().sort(function(e,t){return e.Title.localeCompare(t.Title)}).map(function(t){return e.renderNote(t)})),o.a.createElement("button",{type:"button",disabled:this.state.addNoteLoading,onClick:this.addNote.bind(this),className:"active list-group-item-success list-group-item list-group-item-action"},"Add Note ",o.a.createElement("i",{className:"fas fa-plus-square"}))))}}]),t}(r.Component)),R=Object(b.b)(function(e){return{activeNoteID:e.activeNoteID,user:e.user}})(L),B=n(120),_=n.n(B),U=(n(300),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).sbjNoteBody=new I.a,n.sbjNoteTitle=new I.a,n.sbjNoteBody.pipe(Object(A.a)(500)).subscribe(function(e){return n.saveNoteBody(e)}),n.sbjNoteTitle.pipe(Object(A.a)(500)).subscribe(function(e){return n.saveNoteTitle(e)}),n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"saveNoteBody",value:function(){var e=Object(h.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.note){e.next=2;break}return e.abrupt("return");case 2:return this.props.note.Body=t,e.next=5,D.updateItem("notes",this.props.note);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveNoteTitle",value:function(){var e=Object(h.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.note.Title=t,e.next=3,D.updateItem("notes",this.props.note);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onQuillChange",value:function(e,t,n){this.sbjNoteBody.next(e)}},{key:"changeTitle",value:function(e){this.props.note.Title=e,this.sbjNoteTitle.next(e),this.props.onTitleChange&&this.props.onTitleChange(e),this.forceUpdate()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"note-viewer-container"},o.a.createElement("div",{className:"card p-3"},o.a.createElement("div",{className:"input-group flex-nowrap"},o.a.createElement("input",{value:this.props.note?this.props.note.Title:"",onChange:function(t){return e.changeTitle(t.target.value)},disabled:!this.props.note,placeholder:"Title...",type:"text",className:"form-control"}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("span",{onClick:function(t){return e.props.onClickDelete&&e.props.onClickDelete(e.props.note)},className:"input-group-text btn-deletenote "+(this.props.note?"bg-danger":"disabled")},o.a.createElement("i",{className:"fas fa-trash-alt",style:{color:"white"}})))),o.a.createElement("br",null),o.a.createElement("div",{className:"react-quill-wrapper"},o.a.createElement(_.a,{readOnly:!this.props.note,value:this.props.note?this.props.note.Body:"",onChange:this.onQuillChange.bind(this)}))))}}]),t}(r.Component)),G=function(e){function t(e){var n;return Object(p.a)(this,t),n=Object(f.a)(this,Object(m.a)(t).call(this,e)),C.subscribe(function(){return console.log("getState",C.getState())}),n.initAppAndAuth(),n.state={appReady:!1,notes:[]},n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"initAppAndAuth",value:function(){var e=Object(h.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getRedirectResult();case 2:return e.next=4,j.getAuthState();case 4:if(t=e.sent,C.dispatch(E(t)),!t){e.next=9;break}return e.next=9,this.loadNotes();case 9:this.setState(Object(l.a)({},this.state,{appReady:!0}));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"selectNote",value:function(e){this.setState(Object(l.a)({},this.state,{selectedNote:e}))}},{key:"handleNewNote",value:function(e){this.setState(Object(l.a)({},this.state,{selectedNote:e}))}},{key:"handleDeleteNote",value:function(){var e=Object(h.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.notes.filter(function(e){return e.ID!=t.ID}),C.dispatch(w(null)),this.setState(Object(l.a)({},this.state,{selectedNote:null,notes:n})),D.removeItem("notes",t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadNotes",value:function(){var e=Object(h.a)(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.getCollection("notes",function(e){return e.where("UID","==",t.props.user.uid)}).then(function(e){t.setState(Object(l.a)({},t.state,{notes:e}))});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderAuth",value:function(){return o.a.createElement(O,null)}},{key:"renderAppBody",value:function(){var e=this;return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("br",null),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xs-6 col-sm-5 col-md-4 col-lg-3"},o.a.createElement(R,{notes:this.state.notes,onAddNote:this.handleNewNote.bind(this),onSelectNote:this.selectNote.bind(this)})),o.a.createElement("div",{className:"col-xs-6 col-sm-7 col-md-8 col-lg-9"},o.a.createElement(U,{onClickDelete:function(t){return e.handleDeleteNote(t)},note:this.state.selectedNote,onTitleChange:function(t){return e.forceUpdate()}}))))}},{key:"render",value:function(){return this.state.appReady?o.a.createElement("div",{id:"app-container"},o.a.createElement(T,null),this.props.user?this.renderAppBody():this.renderAuth()):o.a.createElement("div",null,"loading...")}}]),t}(r.Component),P=Object(b.b)(function(e){return{user:e.user}})(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(b.a,{store:C},o.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[123,2,1]]]);
//# sourceMappingURL=main.a8b20c8b.chunk.js.map
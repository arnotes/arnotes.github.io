(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{328:function(e,t,n){e.exports=n(678)},333:function(e,t,n){},338:function(e,t,n){},678:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),c=n.n(o),l=(n(333),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function s(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}!function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");l?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):s(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):s(t,e)})}}();var i,u=n(29),d=n(70),p=n(26);!function(e){e.SET_USER="SET_USER",e.SET_ACTIVE_NOTE="SET_ACTIVE_NOTE",e.SET_NOTE_LIST="SET_NOTE_LIST",e.SET_FOLDER_LIST="SET_FOLDER_LIST",e.SET_FILTERED_NOTE_LIST="SET_FILTERED_NOTE_LIST",e.SET_SEARCH_QUERY="SET_SEARCH_QUERY",e.SET_SELECTED_NOTE="SET_SELECTED_NOTE",e.SET_SEARCHINPUT_FOCUS_STATE="SET_SEARCHINPUT_FOCUS_STATE"}(i||(i={}));var f=Object(d.b)({user:function(e,t){switch(t.type){case i.SET_USER:return t.data;default:return e||null}},notes:function(e,t){switch(t.type){case i.SET_NOTE_LIST:return Object(p.a)(t.data);default:return e||[]}},folders:function(e,t){switch(t.type){case i.SET_FOLDER_LIST:return Object(p.a)(t.data);default:return e||[]}},strSearch:function(e,t){switch(t.type){case i.SET_SEARCH_QUERY:return t.data;default:return e||""}},filteredNotes:function(e,t){var n=[];switch(t.type){case i.SET_FILTERED_NOTE_LIST:t.data&&(n=Object(p.a)(t.data));break;default:e&&(n=Object(p.a)(e))}return n.sort(function(e,t){return e.Title.toLowerCase().localeCompare(t.Title.toLowerCase())})},selectedNote:function(e,t){switch(t.type){case i.SET_SELECTED_NOTE:return t.data;default:return e||null}}}),h=Object(d.c)(f,{}),m=n(22),E=n(23),b=n(34),v=n(33),g=n(35),O=(n(338),n(339),n(340),n(341),n(4)),w=n(31),N=n(12),S=n.n(N),k=n(20),C=n(19),y=function(){function e(t,n){Object(m.a)(this,e),this.type=null,this.data=null,this.type=t,this.data=n}return Object(E.a)(e,[{key:"value",get:function(){return{type:this.type,data:this.data}}}]),e}(),T=n(135),j=n.n(T),D=j.a.initializeApp({apiKey:"AIzaSyCpFJ42-kwnLLQOLAiS3k7Z7JGMa6jQK4Y",authDomain:"arnotes-3dcf8.firebaseapp.com",projectId:"arnotes-3dcf8"}),I=n(130),_=n.n(I),x=new(function(){function e(){Object(m.a)(this,e),this.auth=void 0,this.googleAuthProvider=null,this.auth=D.auth(),this.googleAuthProvider=new j.a.auth.GoogleAuthProvider}return Object(E.a)(e,[{key:"loginWithGoogle",value:function(){return this.auth.signInWithRedirect(this.googleAuthProvider)}},{key:"logOut",value:function(){return this.auth.signOut()}}]),e}()),L=function(e){function t(e){return Object(m.a)(this,t),Object(b.a)(this,Object(v.a)(t).call(this,e))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"loginWith",value:function(e){switch(e){case"google":x.loginWithGoogle()}}},{key:"render",value:function(){var e=this;return r.a.createElement(O.g,{open:!0,fullScreen:!1},r.a.createElement(O.k,null,"Login"),r.a.createElement(O.i,null,r.a.createElement(O.j,null,r.a.createElement(O.u,{component:"nav"},r.a.createElement(O.v,{button:!0,onClick:function(t){return e.loginWith("google")}},r.a.createElement(O.w,null,r.a.createElement("i",{className:"fab fa-google"})),r.a.createElement(O.x,null,"Sign in with Google")),r.a.createElement(O.E,{title:"Not supported"},r.a.createElement(O.v,{button:!0},r.a.createElement(O.w,null,r.a.createElement("i",{className:"fab fa-facebook"})),r.a.createElement(O.x,null,r.a.createElement("del",null,"Login with Facebook"))))))))}}]),t}(a.Component),F=Object(u.b)(function(e){return{user:e.user}},function(e){return{dispatch:e}})(L),R=new(function(){function e(){Object(m.a)(this,e),this.firestore=D.firestore()}return Object(E.a)(e,[{key:"getCollection",value:function(){var e=Object(C.a)(S.a.mark(function e(t){var n,a,r,o,c=arguments;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,a=this.firestore.collection(t),n&&(a=n(a)),e.next=5,a.get();case 5:return r=e.sent,o=[],r.forEach(function(e){var t=e.data();t.ID=e.id,o.push(t)}),o.sort(function(e,t){return e.ID.localeCompare(t.ID)}),e.abrupt("return",o);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addToCollection",value:function(){var e=Object(C.a)(S.a.mark(function e(t,n){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection(t).add(n);case 2:return a=e.sent,n.ID=a.id,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateItem",value:function(e,t){return this.firestore.collection(e).doc(t.ID).update(t)}},{key:"updateMany",value:function(e,t){var n=this.firestore.batch(),a=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value,i=this.firestore.collection(e).doc(s.ID);n.update(i,s)}}catch(u){r=!0,o=u}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n.commit()}},{key:"removeItem",value:function(e,t){return this.firestore.collection(e).doc(t.ID).delete()}},{key:"removeMany",value:function(e,t){var n=this.firestore.batch(),a=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value,i=this.firestore.collection(e).doc(s.ID);n.delete(i)}}catch(u){r=!0,o=u}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n.commit()}}]),e}()),A=n(680),U=n(679),P=n(52),W=n(39),B=n(131),M=n.n(B),z=n(132),q=n.n(z),G=n(133),J=n.n(G),H=n(51),Q=n.n(H),Y=n(681);function K(e){var t=a.useState(""),n=Object(W.a)(t,2),r=n[0],o=n[1],c=a.useState(!1),l=Object(W.a)(c,2),s=l[0],i=l[1],u=a.useMemo(function(){return new A.a},[]),d=a.useCallback(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o(e),i(!0),u.pipe(Object(Y.a)(1)).toPromise()},[]),p=a.useCallback(function(e){u.next(e),i(!1)},[]);return e.setShow&&e.setShow(d),a.createElement(O.g,{open:s},a.createElement(O.k,null,e.title),a.createElement(O.i,null,a.createElement(O.C,{style:{minWidth:"300px"},label:e.label,fullWidth:!0,value:r,onChange:function(e){return o(e.target.value)},margin:"dense"})),a.createElement(O.h,null,a.createElement(O.c,{onClick:function(e){return p(void 0)}},"Cancel"),a.createElement(O.c,{onClick:function(e){return p(r)}},"Ok")))}function V(e){var t=a.useRef();return a.useEffect(function(){t&&t.current&&(t.current.model=e.model)},[e.model]),a.useEffect(function(){t&&t.current&&$(t.current).draggable({handle:".note-list-item-icon",revert:!0,revertDuration:0,axis:"y"})},[t.current]),a.createElement("span",{ref:t,className:e.className},e.children)}var Z=Object(u.b)(function(e){return{notes:e.notes,strSearch:e.strSearch,selectedNote:e.selectedNote}},function(e){return{dispatch:e}})(function(e){var t=a.useState(!1),n=Object(W.a)(t,2),o=n[0],c=n[1],l=a.useState(null),s=Object(W.a)(l,2),u=s[0],d=s[1],p=new RegExp(e.strSearch||"","ig"),f=e.folder,h=(e.notes||[]).filter(function(e){return(e.Title+" "+e.Body).match(p)&&e.FolderID==f.ID}).sort(function(e,t){return e.Title.toLowerCase().localeCompare(t.Title.toLowerCase())}),m=e.selectedNote,E=e.checkedNotes||[],b=function(){var e=Object(a.useState)(!1),t=Object(W.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),l=Object(W.a)(c,2),s=l[0],i=l[1],u=Object(a.useState)(""),d=Object(W.a)(u,2),p=d[0],f=d[1],h=Object(a.useMemo)(function(){return new A.a},[]),m=Object(a.useCallback)(function(e,t){return i(e),f(t),o(!0),h.pipe(Object(Y.a)(1)).toPromise()},[]),E=Object(a.useCallback)(function(e){h.next(e),o(!1)},[]);return[m,r.a.createElement(O.g,{open:n},r.a.createElement(O.k,null,s),r.a.createElement(O.i,null,r.a.createElement(O.j,null,p)),r.a.createElement(O.h,null,r.a.createElement(O.c,{onClick:function(e){return E(!1)}},"Cancel"),r.a.createElement(O.c,{onClick:function(e){return E(!0)}},"Ok")))]}(),v=Object(W.a)(b,2),g=v[0],w=v[1],N=null,T=a.useCallback(function(t,n){e.onCheckNote&&e.onCheckNote(t,n)},[]),j=a.useCallback(function(e){e.preventDefault(),e.stopPropagation(),d(e.target)},[]),D=a.useCallback(function(){d(null)},[]),I=a.useCallback(function(){e.onClickAddNote&&e.onClickAddNote(f.ID),D()},[f]),_=a.useCallback(Object(C.a)(S.a.mark(function t(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return D(),t.next=3,g("Confirm","Delete Notes?");case 3:if(!t.sent){t.next=5;break}e.onClickDeleteNotes&&e.onClickDeleteNotes();case 5:case"end":return t.stop()}},t)})),[f,h]),x=a.useCallback(Object(C.a)(S.a.mark(function t(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return D(),t.next=3,g("Confirm",'Delete folder "'.concat(f.Name,'?"'));case 3:if(!t.sent){t.next=5;break}e.onClickDeleteFolder&&e.onClickDeleteFolder(e.folder);case 5:case"end":return t.stop()}},t)})),[f]),L=a.useCallback(Object(C.a)(S.a.mark(function t(){var n;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return D(),t.next=3,N(f.Name);case 3:null!=(n=t.sent)&&e.onUpdateFolder&&e.onUpdateFolder(Object(k.a)({},f,{Name:n}));case 5:case"end":return t.stop()}},t)})),[f]);return a.createElement(M.a,{expanded:o,onChange:function(){return c(!o)}},a.createElement(q.a,{expandIcon:a.createElement("i",{className:"fas fa-angle-down"})},a.createElement(O.b,{color:h.length?"primary":"error",showZero:!0,badgeContent:h.length},a.createElement(Q.a,null,f.Name))),a.createElement(J.a,{style:{paddingLeft:"5px",paddingRight:"5px"}},a.createElement(O.u,{classes:{root:"note-list"},dense:!0,disablePadding:!0,style:{width:"100%"}},h.map(function(t,n){return a.createElement(V,{key:t.ID,className:"draggable-note-liste-item",model:t},a.createElement(O.v,{classes:{root:"note-list-item"},divider:n+1<h.length,dense:!0,button:!0,selected:t.ID==(m&&m.ID||""),onClick:function(){return e.dispatch(new y(i.SET_SELECTED_NOTE,t).value)}},a.createElement(O.d,{style:{padding:"0px"},onClick:function(e){return e.stopPropagation()},onChange:function(e,n){return T(t,n)},checked:E.includes(t)}),a.createElement(O.x,{primary:t.Title}),a.createElement(O.w,{classes:{root:"note-list-item-icon"},onClick:function(e){return e.stopPropagation()}},a.createElement("i",{className:"fas fa-arrows-alt"}))))}))),a.createElement(O.m,null,a.createElement(O.n,{size:"small",color:"primary",onClick:j},a.createElement("i",{className:"fas fa-ellipsis-v"}))),a.createElement(O.y,{id:"simple-menu",anchorEl:u,open:Boolean(u),onClose:D},a.createElement(O.z,{onClick:I},a.createElement("i",{className:"fas fa-file-medical"}),"\xa0 Add Note"),null!=f.ID&&a.createElement(O.z,{onClick:L},a.createElement("i",{className:"fas fa-pen"}),"\xa0 Rename"),E.length&&a.createElement(a.Fragment,null,a.createElement(O.z,null,a.createElement("i",{className:"fas fa-exchange-alt"}),"\xa0 Move Notes"),a.createElement(O.z,{onClick:_},a.createElement("i",{style:{color:"#F44336"},className:"fas fa-file"}),"\xa0 Delete Notes")),null!=f.ID&&a.createElement(O.z,{onClick:x},a.createElement("i",{style:{color:"#F44336"},className:"fas fa-folder"}),"\xa0 Delete Folder")),a.createElement(K,{title:"Rename Folder",label:"Folder Name",setShow:function(e){return N=e}}),w)});function X(e){var t=a.useRef();return a.useEffect(function(){t&&t.current&&(t.current.model=e.model)},[e.model]),a.useEffect(function(){t&&t.current&&$(t.current).droppable({accept:e.accept,drop:function(t,n){var a=n.draggable[0],r=t.target;e.onJqDrop&&e.onJqDrop(a&&a.model||null,r&&r.model||null)}})},[t.current]),a.createElement("div",{ref:t,className:e.className},e.children)}var ee=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).sbjSearch=new A.a,n.onSearchChange=function(e){n.setState(Object(k.a)({},n.state,{loading:!0,strSearch:e.target.value})),n.sbjSearch.next({})},n.onClickNote=function(e){n.props.onSelectNote&&n.props.onSelectNote(e)},n.onClickAddNote=function(){var e=Object(C.a)(S.a.mark(function e(t){var a,r,o;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="NEW_NOTE_"+(new Date).getTime().toString(),r={Body:"",Title:a,UID:n.props.user.uid,FolderID:t},e.next=4,R.addToCollection("notes",r);case 4:o=[].concat(Object(p.a)(n.props.notes),[r]),n.props.dispatch(new y(i.SET_NOTE_LIST,o).value),n.props.dispatch(new y(i.SET_SELECTED_NOTE,r).value),P.toast.info("New note added!",{position:"bottom-right",hideProgressBar:!0,autoClose:2500}),setTimeout(function(){var e=document.querySelector("#txt-note-title");e.focus(),e.select()},100);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onClickDeleteNotes=Object(C.a)(S.a.mark(function e(){var t,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(p.a)(n.state.checkedNotes),n.state.checkedNotes.includes(n.props.selectedNote)&&n.props.dispatch(new y(i.SET_SELECTED_NOTE,null).value),n.setState(Object(k.a)({},n.state,{checkedNotes:[]})),a=n.props.notes.filter(function(e){return!t.includes(e)}),n.props.dispatch(new y(i.SET_NOTE_LIST,a).value),P.toast.info("".concat(t.length," note/s deleted!"),{position:"bottom-right",hideProgressBar:!0,autoClose:2500}),e.next=8,R.removeMany("notes",t);case 8:case"end":return e.stop()}},e)})),n.onClickAddFolder=Object(C.a)(S.a.mark(function e(){var t;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={ID:null,Name:"NEW_FOLDER_"+(new Date).getTime(),UID:n.props.user.uid},e.next=3,R.addToCollection("folders",t);case 3:n.props.dispatch(new y(i.SET_FOLDER_LIST,[].concat(Object(p.a)(n.props.folders),[t])).value),P.toast.info("New folder added!",{position:"bottom-right",hideProgressBar:!0,autoClose:2500});case 5:case"end":return e.stop()}},e)})),n.onClickDeleteFolder=function(){var e=Object(C.a)(S.a.mark(function e(t){var a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.folders.filter(function(e){return e.ID!=t.ID}),(r=n.props.notes.filter(function(e){return e.FolderID==t.ID})).forEach(function(e){return e.FolderID=null}),console.log(t,r),e.next=6,R.removeItem("folders",t);case 6:return e.next=8,R.updateMany("notes",r);case 8:n.props.dispatch(new y(i.SET_FOLDER_LIST,a).value),n.props.dispatch(new y(i.SET_NOTE_LIST,Object(p.a)(n.props.notes)).value),P.toast.info("Folder deleted!",{position:"bottom-right",hideProgressBar:!0,autoClose:2500});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onNoteListCheck=function(e,t){t?n.setState(Object(k.a)({},n.state,{checkedNotes:[].concat(Object(p.a)(n.state.checkedNotes),[e])})):n.setState(Object(k.a)({},n.state,{checkedNotes:n.state.checkedNotes.filter(function(t){return t.ID!=e.ID})}))},n.onUpdateFolder=function(){var e=Object(C.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=n.props.folders.findIndex(function(e){return e.ID==t.ID}))+1)){e.next=6;break}return n.props.folders[a]=t,n.props.dispatch(new y(i.SET_FOLDER_LIST,Object(p.a)(n.props.folders)).value),e.next=6,R.updateItem("folders",t);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onDropToFolder=function(){var e=Object(C.a)(S.a.mark(function e(t,a){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=6;break}return t.FolderID=a.ID,n.props.dispatch(new y(i.SET_NOTE_LIST,Object(p.a)(n.props.notes)).value),e.next=5,R.updateItem("notes",t);case 5:P.toast.info('"'.concat(t.Title,'" moved to "').concat(a.Name,'"'),{position:"bottom-right",hideProgressBar:!0,autoClose:2500});case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.willFolderAcceptNote=function(e,t){var n=e[0],a=n&&n.model||null;return!(!a||a.FolderID==t.ID)},n.state={checkedNotes:[],strSearch:null},n}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.sbjSearch.pipe(Object(U.a)(500)).subscribe(function(){e.setState(Object(k.a)({},e.state,{loading:!1})),e.props.dispatch(new y(i.SET_SEARCH_QUERY,e.state.strSearch).value)})}},{key:"getFilterNotes",value:function(){var e=this.props&&this.props.selectedNote&&this.props.selectedNote.ID||"",t=(this.props.strSearch||"").toLowerCase();return(this.props.notes||[]).slice(0).filter(function(n){return n.Body.toLowerCase().includes(t)||n.Title.toLocaleLowerCase().includes(t)||n.ID==e})}},{key:"render",value:function(){var e=this,t=this.state.loading,n=this.state.strSearch,a=(this.props.folders||[]).sort(function(e,t){return e.Name.toLowerCase().localeCompare(t.Name.toLowerCase())}),o=[{ID:null,Name:"General Notes",UID:this.props.user.uid}].concat(Object(p.a)(a));return null==n&&(n=this.props.strSearch||""),r.a.createElement("div",{className:"note-list-component"},r.a.createElement(O.A,{classes:{root:"actions-bar-wrapper"}},r.a.createElement(O.u,null,r.a.createElement(O.v,{button:!0,dense:!0,onClick:this.onClickAddFolder},r.a.createElement(O.x,{classes:{root:"note-item-text"}},"ADD FOLDER"),r.a.createElement(O.w,null,r.a.createElement("i",{className:"fas fa-folder-plus"})))),"\xa0"),r.a.createElement(O.A,{classes:{root:"searchbar-paper"}},r.a.createElement("div",{className:"search-input-wrapper"},r.a.createElement(O.s,{onChange:this.onSearchChange,value:n,classes:{root:"search-input"},placeholder:"Search.."}),r.a.createElement(O.q,{fontSize:"small",classes:{root:"search-icon"}},r.a.createElement("i",{style:{color:"#a0a0a0"},className:"fas fa-search"})))),r.a.createElement(O.t,{classes:{root:t?"search-progress-loading":"search-progress-complete"},color:"primary"}),r.a.createElement("div",{className:"list-of-notes"},o.map(function(t){return r.a.createElement(X,{className:"droppable-folder",key:t.ID,model:t,onJqDrop:e.onDropToFolder,accept:function(n){return e.willFolderAcceptNote(n,t)}},r.a.createElement(Z,{checkedNotes:e.state.checkedNotes,onCheckNote:e.onNoteListCheck,onClickAddNote:e.onClickAddNote,onClickDeleteNotes:e.onClickDeleteNotes,onClickDeleteFolder:e.onClickDeleteFolder,onUpdateFolder:e.onUpdateFolder,folder:t}))})))}}]),t}(a.Component),te=Object(u.b)(function(e){return Object(k.a)({},e)},function(e){return{dispatch:e}})(ee),ne=n(278),ae=n.n(ne),re=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).sbjChange=new A.a,n.currentNoteID=null,n.onCloseNote=function(){n.props.dispatch(new y(i.SET_SELECTED_NOTE,null).value)},n.onDeleteNote=function(){var e=Object(C.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.removeItem("notes",t);case 2:a=n.props.notes.filter(function(e){return e.ID!=t.ID}),n.props.dispatch(new y(i.SET_NOTE_LIST,a).value),n.onCloseNote();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={},n}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.sbjChange.pipe(Object(U.a)(500)).subscribe(Object(C.a)(S.a.mark(function t(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.dispatch(new y(i.SET_SELECTED_NOTE,e.props.selectedNote).value),e.props.dispatch(new y(i.SET_NOTE_LIST,Object(p.a)(e.props.notes)).value),t.next=4,R.updateItem("notes",e.props.selectedNote);case 4:e.setState(Object(k.a)({},e.state,{loading:!1}));case 5:case"end":return t.stop()}},t)})))}},{key:"componentWillReceiveProps",value:function(e,t){var n=e,a=n.selectedNote&&n.selectedNote.ID||null;this.currentNoteID!=a&&this.setState(Object(k.a)({},this.state,{title:null,body:null,readonly:null})),this.currentNoteID=n.selectedNote&&n.selectedNote.ID||null}},{key:"onTitleChange",value:function(e){this.props.selectedNote.Title=e,this.sbjChange.next({title:this.state.title,body:this.state.body,readonly:this.state.readonly}),this.setState(Object(k.a)({},this.state,{loading:!0,title:e}))}},{key:"onBodyChange",value:function(e,t,n){"user"==n&&(this.props.selectedNote.Body=e,this.sbjChange.next({title:this.state.title,body:this.state.body,readonly:this.state.readonly}),this.setState(Object(k.a)({},this.state,{loading:!0,body:e})))}},{key:"onReadOnlyChange",value:function(e){this.props.selectedNote.IsReadOnly=e,this.sbjChange.next({title:this.state.title,body:this.state.body,readonly:this.state.readonly}),this.setState(Object(k.a)({},this.state,{loading:!0,readonly:e}))}},{key:"render",value:function(){var e=this,t=this.props.selectedNote,n=this.state,a=n.title,o=n.body,c=n.readonly;return null==a&&(a=t&&t.Title||""),null==o&&(o=t&&t.Body||""),null==c&&(c=t&&t.IsReadOnly||!1),r.a.createElement("div",{className:"note-editor-component"},r.a.createElement("div",{className:"empty-editor-wrapper "+(t&&"hidden")},r.a.createElement("div",{className:"empty-editor-paper"},r.a.createElement("div",null,r.a.createElement(O.q,null,r.a.createElement("i",{className:"backdrop-icon fas fa-book"}))))),r.a.createElement(O.A,{classes:{root:!t&&"hidden"},square:!0},r.a.createElement("div",{className:"title-wraper"},r.a.createElement(O.C,{id:"txt-note-title",label:"Title",onChange:function(t){return e.onTitleChange(t.target.value)},classes:{root:"txt-title"},disabled:!t,value:a}),r.a.createElement(O.r,{disabled:!t,onClick:this.onCloseNote,color:"default"},r.a.createElement("i",{style:{fontSize:"20px"},className:"fas fa-times-circle"})),r.a.createElement(O.e,{color:"secondary",className:"editor-save-progress "+(!this.state.loading&&"hidden")}))),r.a.createElement(O.A,{classes:{root:"quill-paper-wrapper "+(!t&&"hidden")},square:!0},r.a.createElement(ae.a,{onChange:function(t,n,a){return e.onBodyChange(t,n,a)},readOnly:!t||c,value:o,placeholder:"write your notes :)",theme:"snow"}),r.a.createElement(O.o,{style:{position:"absolute",right:"0px",bottom:"0px"},control:r.a.createElement(O.B,{checked:c,onChange:function(t,n){return e.onReadOnlyChange(n)}}),label:"Read-only"})))}}]),t}(a.Component),oe=Object(u.b)(function(e){return Object(k.a)({},e)},function(e){return{dispatch:e}})(re),ce=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).toggleDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=!n.state.drawerOpen),n.setState(Object(k.a)({},n.state,{drawerOpen:e}))},n.logout=Object(C.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.logOut();case 2:n.props.dispatch(new y(i.SET_USER,null).value);case 3:case"end":return e.stop()}},e)})),n.onSelectNote=function(e){n.props.dispatch(new y(i.SET_SELECTED_NOTE,e).value),n.toggleDrawer(!1)},n.state={drawerOpen:!1},n}return Object(g.a)(t,e),Object(E.a)(t,[{key:"isMobile",value:function(){return"xs"==this.props.width||"sm"==this.props.width}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"layout-component ".concat((this.state.drawerOpen||!this.isMobile())&&"drawer-open")},r.a.createElement("nav",null,r.a.createElement(O.l,{anchor:"left",variant:this.isMobile()?"temporary":"permanent",onClose:function(){return e.toggleDrawer(!1)},open:this.state.drawerOpen,classes:{paper:"drawer-paper"}},r.a.createElement(te,{onSelectNote:this.onSelectNote}))),r.a.createElement(O.a,{color:"primary",position:"relative"},r.a.createElement(O.D,null,r.a.createElement(O.p,{only:["md","lg","xl"]},r.a.createElement(O.r,{onClick:function(){return e.toggleDrawer()}},r.a.createElement("i",{className:"fas fa-bars"}))),r.a.createElement(O.F,{variant:"h6",color:"inherit"},this.props.user.email),r.a.createElement(O.E,{title:"Sign Out",placement:"left"},r.a.createElement(O.r,{onClick:this.logout,classes:{root:"btn-logout"}},r.a.createElement("i",{style:{fontSize:"20px"},className:"fas fa-power-off"}))))),r.a.createElement("div",{className:"layout-content"},r.a.createElement(oe,null)))}}]),t}(a.Component),le=Object(u.b)(function(e){return{user:e.user}},function(e){return{dispatch:e}})(ce),se=Object(O.G)()(le),ie=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).state={loading:!0},n}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.checkAuth()}},{key:"checkAuth",value:function(){var e=Object(C.a)(S.a.mark(function e(){var t=this;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState(Object(k.a)({},this.state,{loading:!0})),D.auth().onAuthStateChanged(function(e){t.props.dispatch(new y(i.SET_USER,e).value),t.setState(Object(k.a)({},t.state,{loading:!1})),e&&t.loadNotes()});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadNotes",value:function(){var e=Object(C.a)(S.a.mark(function e(){var t,n,a=this;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.getCollection("folders",function(e){return e.where("UID","==",a.props.user.uid)}),n=R.getCollection("notes",function(e){return e.where("UID","==",a.props.user.uid)}),e.t0=this.props,e.t1=y,e.t2=i.SET_NOTE_LIST,e.next=7,n;case 7:return e.t3=e.sent,e.t4=new e.t1(e.t2,e.t3).value,e.t0.dispatch.call(e.t0,e.t4),e.t5=this.props,e.t6=y,e.t7=i.SET_FOLDER_LIST,e.next=15,t;case 15:e.t8=e.sent,e.t9=new e.t6(e.t7,e.t8).value,e.t5.dispatch.call(e.t5,e.t9);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{className:"giant-progress-container-wrapper"},r.a.createElement("div",{className:"giant-progress-container"},r.a.createElement(_.a,{variant:"indeterminate",size:200,value:50,color:"primary"}))):null==this.props.user?r.a.createElement("div",{className:"flex-hbox login-wrapper"},r.a.createElement(F,null)):r.a.createElement(se,null)}}]),t}(a.Component),ue=Object(u.b)(function(e){return{user:e.user}},function(e){return{dispatch:e}})(ie),de=Object(w.createMuiTheme)({palette:{type:"dark",primary:{main:"#673ab7"},secondary:{main:"#00e5ff"}}}),pe=function(e){function t(e){return Object(m.a)(this,t),Object(b.a)(this,Object(v.a)(t).call(this,e))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement(w.MuiThemeProvider,{theme:de},r.a.createElement("input",{type:"text",hidden:!0,value:"testdeploy2"}),r.a.createElement(O.f,null),r.a.createElement(ue,null),r.a.createElement(P.ToastContainer,null))}}]),t}(a.Component);c.a.render(r.a.createElement(u.a,{store:h},r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[328,1,2]]]);
//# sourceMappingURL=main.132b5e00.chunk.js.map